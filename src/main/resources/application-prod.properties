# ===============================
# = DATABASE (Production)
# ===============================
# Railway provides DATABASE_URL in format: postgresql://user:pass@host:port/dbname
# DatabaseConfig.java will parse it automatically
# Fallback if DATABASE_URL parsing fails:
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/wiki}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${PGUSER:postgres}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${PGPASSWORD:postgres}}

# Explicitly set Hibernate dialect for PostgreSQL (REQUIRED - must be set before connection)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# ===============================
# = JPA / HIBERNATE
# ===============================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# ===============================
# = SERVER
# ===============================
server.port=${PORT:8081}

spring.data.redis.repositories.enabled=false
spring.redis.enabled=false
management.health.redis.enabled=false

# ===============================
# = JWT CONFIGURATION
# ===============================
jwt.secret=${JWT_SECRET:your-256-bit-secret-key-must-be-at-least-32-characters-long-for-hs256-algorithm}
jwt.expiration=86400000
jwt.refresh-expiration=604800000

# ===============================
# = STATIC RESOURCES
# ===============================
spring.web.resources.static-locations=classpath:/static/
spring.mvc.static-path-pattern=/static/**

# ===============================
# = LOGGING
# ===============================
logging.level.root=INFO
logging.level.com.kz.wiki=INFO

# ===============================
# = CORS
# ===============================
# Comma-separated list of frontend URLs
frontend.url=${FRONTEND_URL:http://localhost:3000,http://localhost:5173}
