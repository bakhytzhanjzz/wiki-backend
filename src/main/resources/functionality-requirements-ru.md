# Wiki Система Учета и Торговли - Полный Перечень Функционала

## Обзор
Wiki — это многопользовательская система управления складом и точкой продаж для малого и среднего розничного бизнеса в Казахстане. Этот документ описывает весь функционал, необходимый для реализации фронтенда.

---

## 1. Аутентификация и Управление Пользователями

### 1.1 Страница Входа
- Поля ввода email и пароля
- Чекбокс "Запомнить меня" (опционально)
- Ссылка "Забыли пароль?" (будущая функция)
- Кнопка входа с индикатором загрузки
- Отображение сообщений об ошибках при неверных данных
- Перенаправление на панель управления после успешного входа

### 1.2 Страница Регистрации
- Поле ввода названия компании (автоматически генерирует ID арендатора)
- Поле ввода email владельца
- Поле ввода пароля с индикатором надежности
- Поле ввода полного имени
- Выбор роли (Владелец/Администратор/Продавец)
- Чекбокс условий использования
- Кнопка регистрации
- Перенаправление на страницу входа после успешной регистрации

### 1.3 Управление Токенами
- Хранение JWT токена доступа в памяти/localStorage
- Безопасное хранение refresh токена
- Автоматическое обновление токена перед истечением
- Функция выхода (очистка токенов)
- Обработка истечения сессии

### 1.4 Профиль Пользователя (только для Владельца/Администратора)
- Просмотр информации о текущем пользователе
- Обновление полного имени
- Смена пароля (с проверкой текущего пароля)
- Просмотр назначенной роли и информации об арендаторе

---

## 2. Панель Управления и Аналитика

### 2.1 Главная Панель
- **Карточка Выручки за Сегодня**: Крупное отображение дневной выручки в тенге
- **Количество Продаж за Сегодня**: Число завершенных продаж
- **Карточки Быстрой Статистики**:
  - Всего товаров
  - Предупреждения о низком остатке (товары ниже порога)
  - Ожидающие действия
- **Таблица Последних Продаж**: Последние 10 продаж с датой, суммой, количеством товаров
- **График Выручки**: Тренд дневной выручки (последние 7 дней)
- Выбор даты для просмотра разных дней
- Кнопка обновления данных

### 2.2 Страница Аналитики
- **Выбор Диапазона Дат**: Выбор начальной и конечной даты
- **Аналитика Выручки**:
  - Общая выручка за выбранный период
  - Средняя дневная выручка
  - График выручки по дням (линейный/столбчатый)
- **Аналитика Продаж**:
  - Общее количество продаж
  - Средняя сумма продажи
  - График количества продаж по дням
- **Производительность Товаров**:
  - Топ-10 продаваемых товаров
  - Товары по выручке
- **Опции Экспорта**: Экспорт в PDF/Excel (будущая функция)

---

## 3. Управление Товарами

### 3.1 Страница Списка Товаров
- **Строка Поиска**: Поиск по названию товара или артикулу
- **Опции Фильтрации**:
  - Фильтр по категории
  - Фильтр по статусу остатка (в наличии, низкий остаток, нет в наличии)
  - Сортировка по названию, цене, количеству на складе
- **Сетка/Таблица Товаров**:
  - Заглушка изображения товара
  - Название товара
  - Артикул (SKU)
  - Цена (тенге)
  - Количество на складе с цветовой индикацией (зеленый/желтый/красный)
  - Бейдж категории
  - Действия: Редактировать, Удалить, Просмотр деталей
- **Пагинация**: Выбор размера страницы и навигация по страницам
- **Массовые Действия**: Выбор нескольких товаров для массовых операций (будущее)

### 3.2 Страница Создания/Редактирования Товара
- **Основная Информация**:
  - Название товара (обязательно)
  - Артикул (обязательно, уникален для арендатора)
  - Цена в тенге (обязательно, десятичное число)
  - Выпадающий список категорий
- **Информация об Остатке**:
  - Начальное количество на складе (по умолчанию: 0)
  - Порог низкого остатка (опционально)
- **Дополнительные Поля** (будущее):
  - Описание товара
  - Загрузка изображения товара
  - Поле штрих-кода
- **Валидация Формы**: Валидация в реальном времени с сообщениями об ошибках
- **Кнопки Сохранить/Отмена**: Сохранить создает/обновляет, Отмена возвращает к списку

### 3.3 Страница Деталей Товара
- Полное отображение информации о товаре
- Временная шкала истории остатков
- Последние продажи, включающие этот товар
- Кнопки Редактировать и Удалить (если у пользователя есть разрешение)
- Кнопка быстрой корректировки остатка

---

## 4. Управление Категориями

### 4.1 Страница Списка Категорий
- Список всех категорий
- Название категории
- Количество товаров в категории
- Действия Редактировать и Удалить
- Кнопка создания новой категории

### 4.2 Страница Создания/Редактирования Категории
- Поле ввода названия категории (обязательно, уникально для арендатора)
- Кнопки Сохранить/Отмена
- Валидация на дубликаты названий

---

## 5. Точка Продаж (POS)

### 5.1 Интерфейс Терминала POS
- **Строка Поиска Товаров**: Поиск в реальном времени при вводе
- **Область Выбора Товаров**:
  - Сетка/список товаров с изображениями
  - Кнопки быстрого добавления (+1, +5, +10)
  - Индикатор наличия на складе
- **Панель Корзины/Товаров Продажи**:
  - Список выбранных товаров с:
    - Названием товара
    - Количеством (с кнопками +/-)
    - Ценой за единицу
    - Общей ценой за товар
    - Кнопкой удаления товара
  - Отображение промежуточной суммы
  - Расчет налога (если применимо, будущее)
  - **Итоговая Сумма** (крупно, заметно)
- **Секция Оплаты**:
  - Ввод суммы наличных
  - Отображение расчета сдачи
  - Выбор способа оплаты (только наличные для MVP)
  - Кнопка завершения продажи
- **Быстрые Действия**:
  - Кнопка очистки корзины
  - Кнопка отложить продажу (будущее)
  - Кнопка скидки (будущее)

### 5.2 Превью/Печать Чека
- Шаблон чека с:
  - Названием и адресом компании
  - Датой и временем продажи
  - Номером/ID продажи
  - Детализированным списком с количествами и ценами
  - Промежуточной суммой и итогом
  - Способом оплаты и суммой
  - Выданной сдачей
- Кнопка печати (открывает диалог печати)
- Кнопка отправки чека на email (будущее)
- Кнопка сохранения в PDF (будущее)

---

## 6. Продажи и Возвраты

### 6.1 Страница Истории Продаж
- **Фильтр Диапазона Дат**: Сегодня, Эта Неделя, Этот Месяц, Произвольный диапазон
- **Таблица Списка Продаж**:
  - ID/Номер продажи
  - Дата и время
  - Общая сумма
  - Количество товаров
  - Имя кассира
  - Тип продажи (Продажа/Возврат)
  - Действия: Просмотр Деталей, Обработать Возврат
- **Функция Поиска**: Поиск по ID продажи или клиенту (будущее)
- **Опции Экспорта**: Экспорт в Excel/PDF

### 6.2 Страница Деталей Продажи
- Полная информация о продаже
- Детализированный список проданных товаров
- Детали оплаты
- Кнопка возврата (если еще не возврат)
- Кнопка печати чека

### 6.3 Обработка Возврата
- Выбор оригинальной продажи для возврата
- Отображение товаров оригинальной продажи
- Выбор товаров для возврата (полный или частичный)
- Поле ввода причины возврата (опционально)
- Кнопка обработки возврата
- Диалог подтверждения перед обработкой
- Автоматическое восстановление остатка

---

## 7. Управление Складом

### 7.1 Страница Обзора Склада
- **Карточки Статуса Остатков**:
  - Всего товаров
  - Товары в наличии
  - Товары с низким остатком (ниже порога)
  - Товары отсутствующие
- **Предупреждения о Низком Остатке**: Список товаров, требующих пополнения
- **Таблица Движений Склада**: Последние складские операции
- **Быстрые Действия**: Массовое обновление остатков (будущее)

### 7.2 Страница Поступления на Склад
- Выбор товара (поисковый выпадающий список)
- Ввод количества
- Поле причины/заметок (опционально)
- Информация о поставщике (будущее)
- Кнопка записи поступления
- Подтверждение и сообщение об успехе

### 7.3 Страница Списания со Склада
- Выбор товара
- Ввод количества (с отображением текущего остатка)
- Выбор причины (Повреждение, Утрата, Кража, Просрочено, Другое)
- Поле дополнительных заметок
- Кнопка записи списания
- Предупреждение, если количество превышает доступный остаток

### 7.4 История Остатков Товара
- Временная шкала всех складских операций
- Фильтр по типу операции (Поступление/Списание/Продажа)
- Фильтр диапазона дат
- Опция экспорта истории

---

## 8. Управление Пользователями (только для Владельца/Администратора)

### 8.1 Страница Списка Пользователей
- Таблица всех пользователей компании
- Email пользователя, полное имя, роль
- Статус (Активен/Неактивен)
- Дата последнего входа
- Действия: Редактировать, Деактивировать, Удалить

### 8.2 Страница Создания/Редактирования Пользователя
- Поле ввода email
- Поле ввода полного имени
- Выбор роли (Владелец/Администратор/Продавец)
- Поле ввода пароля (для новых пользователей)
- Отправка пригласительного email (будущее)
- Кнопки Сохранить/Отмена

---

## 9. Настройки (только для Владельца)

### 9.1 Настройки Компании
- Название компании (редактируемое)
- Адрес компании
- Контактная информация
- Налоговый ID/НДС номер (будущее)
- Загрузка логотипа (будущее)

### 9.2 Системные Настройки
- Настройки валюты (тенге)
- Формат даты/времени
- Настройка шаблона чека (будущее)
- Порог низкого остатка (глобальное значение по умолчанию)
- Настройки резервного копирования

---

## 10. Навигация и Макет

### 10.1 Боковая Панель Навигации
- Иконка и ссылка Панели управления
- Иконка и ссылка Товаров
- Иконка и ссылка Категорий
- Иконка и ссылка Терминала POS (заметно)
- Иконка и ссылка Продаж
- Иконка и ссылка Управления Складом
- Иконка и ссылка Аналитики
- Иконка и ссылка Пользователей (только для Владельца/Администратора)
- Иконка и ссылка Настроек (только для Владельца)
- Кнопка выхода (внизу)

### 10.2 Верхняя Панель
- Название/логотип компании
- Имя и роль текущего пользователя
- Иконка уведомлений (будущее)
- Выпадающее меню профиля пользователя

### 10.3 Адаптивный Дизайн
- Макет, удобный для мобильных устройств
- Сворачиваемая боковая панель на мобильных
- Кнопки, удобные для касания, для POS
- Оптимизация для планшетов

---

## 11. Контроль Доступа на Основе Ролей

### 11.1 Разрешения Владельца
- Полный доступ ко всем функциям
- Управление пользователями
- Настройки компании
- Все отчеты и аналитика

### 11.2 Разрешения Администратора
- Управление товарами
- Обработка продаж
- Управление складом
- Просмотр аналитики
- Нет доступа к управлению пользователями или настройкам

### 11.3 Разрешения Продавца
- Доступ к терминалу POS
- Обработка продаж
- Просмотр каталога товаров
- Просмотр уровней остатков
- Нет доступа к редактированию товаров, корректировкам остатков или аналитике

---

## 12. Обработка Ошибок и Обратная Связь с Пользователем

### 12.1 Сообщения об Ошибках
- Понятные, удобные для пользователя сообщения об ошибках
- Ошибки валидации отображаются встроенно
- Обработка сетевых ошибок
- Уведомления об истечении сессии

### 12.2 Сообщения об Успехе
- Сообщения подтверждения для успешных действий
- Автоматическое скрытие через 3-5 секунд
- Опция отмены для критических действий (будущее)

### 12.3 Состояния Загрузки
- Спиннеры загрузки для асинхронных операций
- Скелетные экраны для загрузки данных
- Отключенные кнопки во время обработки

---

## Технические Заметки для Фронтенда

- Все API endpoints имеют префикс `/api`
- Аутентификация: Bearer токен в заголовке Authorization
- Формат даты: ISO 8601 (YYYY-MM-DD)
- Валюта: KZT (Казахстанский тенге)
- Поддержка языков: Подготовка для казахского/русского/английского (будущее)
- Все денежные значения используют точность BigDecimal (2 знака после запятой)

---