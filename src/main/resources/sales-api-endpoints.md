# API Endpoints –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–ü—Ä–æ–¥–∞–∂–∏"

> **–î–ª—è –±—ç–∫–µ–Ω–¥–µ—Ä–∞:** –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é API —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–ü—Ä–æ–¥–∞–∂–∏". –§—Ä–æ–Ω—Ç–µ–Ω–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å —ç—Ç–∏–º–∏ —ç–Ω–¥–ø–æ–π–Ω—Ç–∞–º–∏. –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

## –ë–∞–∑–æ–≤—ã–π URL
```
https://wiki-backend-30t2.onrender.com/api
```

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Bearer Token (–∫—Ä–æ–º–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–ª–æ–≥–∏–Ω–∞).

---

## –°—Ç–∞—Ç—É—Å —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤

### ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–µ—Å—Ç—å –≤ Postman –∫–æ–ª–ª–µ–∫—Ü–∏–∏):
- **Sales** (`/sales`) - –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø–æ–ª—É—á–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—Ç)

### ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- **Sales** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –æ–±–º–µ–Ω—ã
- **Sales Drafts** (`/sales/drafts`) - —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –∏ –æ—Ç–ª–æ–∂–∫–∏
- **Sales Returns** (`/sales/:id/return`) - –≤–æ–∑–≤—Ä–∞—Ç—ã (—á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- **Sales Exchanges** (`/sales/:id/exchange`) - –æ–±–º–µ–Ω—ã
- **Sales Statistics** (`/sales/statistics`) - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
- **Customers** (`/customers`) - –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–¥–∞–∂
- **Discounts** (`/discounts`) - —Å–∫–∏–¥–∫–∏ –∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã
- **Gift Cards** (`/gift-cards`) - –ø–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- **Payment Methods** (`/payment-methods`) - –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã
- **Sales Reports** (`/sales/reports`) - –æ—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º

---

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –¥–ª—è –±—ç–∫–µ–Ω–¥–µ—Ä–∞

1. **–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤:** –í—Å–µ —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
   ```json
   {
     "data": [...]
   }
   ```
   –∏–ª–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞:
   ```json
   {
     "data": { ... }
   }
   ```

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:
   ```json
   {
     "message": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏",
     "error": "ERROR_CODE"
   }
   ```

3. **–ü–æ–∏—Å–∫:** –ü–∞—Ä–∞–º–µ—Ç—Ä `search` –¥–æ–ª–∂–µ–Ω –∏—Å–∫–∞—Ç—å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω–æ–º–µ—Ä —á–µ–∫–∞, –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞, –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

4. **–§–∏–ª—å—Ç—Ä—ã:** –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏.

5. **–î–∞—Ç—ã:** –í—Å–µ –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601 (YYYY-MM-DD –∏–ª–∏ YYYY-MM-DDTHH:mm:ssZ).

---

## 1. –ü—Ä–æ–¥–∞–∂–∏ (Sales) - –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### 1.1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–æ–¥–∞–∂–∏
```
GET /sales
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` (string, optional) - –ø–æ–∏—Å–∫ –ø–æ ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω–æ–º–µ—Ä—É —á–µ–∫–∞, –∫–ª–∏–µ–Ω—Ç—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `storeId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É
- `paymentMethod` (string, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –æ–ø–ª–∞—Ç—ã (cash, card, transfer, etc.)
- `sellerId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ–¥–∞–≤—Ü—É
- `customerId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª–∏–µ–Ω—Ç—É
- `minAmount` (number, optional) - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ —á–µ–∫–∞
- `maxAmount` (number, optional) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ —á–µ–∫–∞
- `startDate` (string, optional) - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (YYYY-MM-DD)
- `endDate` (string, optional) - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (YYYY-MM-DD)
- `status` (string, optional) - —Å—Ç–∞—Ç—É—Å (completed, cancelled, draft, deferred)
- `type` (string, optional) - —Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (sale, return, exchange)
- `page` (number, optional) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)
- `limit` (number, optional) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)

**–ü—Ä–∏–º–µ—Ä:**
```
GET /sales?search=123&storeId=1&paymentMethod=cash&startDate=2024-01-01&endDate=2024-01-31
GET /sales?minAmount=1000&maxAmount=5000&sellerId=5
```

**Response:**
```json
{
  "data": [
    {
      "id": 1,
      "transactionNumber": "TXN-2024-001",
      "receiptNumber": "RCP-2024-001",
      "storeId": 1,
      "storeName": "Store Madiyar-accessories",
      "customerId": 1,
      "customerName": "John Doe",
      "customerPhone": "+77001234567",
      "sellerId": 5,
      "sellerName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "items": [
        {
          "id": 1,
          "productId": 1,
          "productName": "Laptop Computer",
          "productSku": "LAP-001",
          "productBarcode": "1234567890123",
          "quantity": 2,
          "price": 999.99,
          "discount": 0,
          "discountType": "percentage",
          "totalPrice": 1999.98,
          "type": "product"
        },
        {
          "id": 2,
          "productId": 2,
          "productName": "Mouse",
          "productSku": "MOU-001",
          "quantity": 1,
          "price": 29.99,
          "discount": 10,
          "discountType": "percentage",
          "totalPrice": 26.99,
          "type": "product"
        }
      ],
      "subtotal": 2026.97,
      "discount": 0,
      "discountType": null,
      "discountCode": null,
      "totalAmount": 2026.97,
      "paymentMethod": "cash",
      "paymentMethods": [
        {
          "method": "cash",
          "amount": 2026.97
        }
      ],
      "giftCardsUsed": [],
      "loyaltyPointsUsed": 0,
      "loyaltyPointsEarned": 20,
      "note": "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –∫ –ø—Ä–æ–¥–∞–∂–µ",
      "status": "completed",
      "type": "sale",
      "createdAt": "2024-01-15T10:30:00Z",
      "completedAt": "2024-01-15T10:35:00Z",
      "createdBy": 5,
      "createdByName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 150,
    "totalPages": 8
  }
}
```

### 1.2. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É –ø–æ ID
```
GET /sales/:id
```

**Response:** (—Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç, —á—Ç–æ –∏ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞)

### 1.3. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥–∞–∂—É
```
POST /sales
```

**Body:**
```json
{
  "storeId": 1,
  "customerId": 1,
  "sellerId": 5,
  "useWholesalePrices": false,
  "items": [
    {
      "productId": 1,
      "quantity": 2,
      "price": 999.99,
      "wholesalePrice": 899.99,
      "discount": 0,
      "discountType": "percentage"
    },
    {
      "productId": 2,
      "quantity": 1,
      "price": 29.99,
      "wholesalePrice": 25.99,
      "discount": 10,
      "discountType": "percentage"
    }
  ],
  "subtotal": 2026.97,
  "discount": 0,
  "discountType": null,
  "discountCode": null,
  "totalAmount": 2026.97,
  "paymentMethod": "cash",
  "paymentMethods": [
    {
      "method": "cash",
      "amount": 2026.97
    }
  ],
  "giftCardCodes": [],
  "loyaltyPointsUsed": 0,
  "debtPaymentAmount": 0,
  "note": "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –∫ –ø—Ä–æ–¥–∞–∂–µ",
  "isDraft": false,
  "isDeferred": false
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- `useWholesalePrices` (boolean, optional) - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–æ–≤—ã–µ —Ü–µ–Ω—ã –≤–º–µ—Å—Ç–æ —Ä–æ–∑–Ω–∏—á–Ω—ã—Ö
- –ï—Å–ª–∏ `useWholesalePrices: true`, —Ç–æ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `wholesalePrice` –≤–º–µ—Å—Ç–æ `price`
- `wholesalePrice` –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ä–æ–∑–Ω–∏—á–Ω–æ–π —Ü–µ–Ω—ã

**Response:** (—Å–æ–∑–¥–∞–Ω–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∏–∑ 1.1)

### 1.4. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É (—Ç–æ–ª—å–∫–æ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –∏ –æ—Ç–ª–æ–∂–æ–∫)
```
PUT /sales/:id
```

**Body:** (—Ç–µ –∂–µ –ø–æ–ª—è, —á—Ç–æ –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)

### 1.5. –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É (—Ç–æ–ª—å–∫–æ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –∏ –æ—Ç–ª–æ–∂–æ–∫)
```
DELETE /sales/:id
```

### 1.6. –û—Ç–º–µ–Ω–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É
```
POST /sales/:id/cancel
```

**Body:**
```json
{
  "reason": "–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã"
}
```

---

## 2. –í–æ–∑–≤—Ä–∞—Ç—ã (Returns)

### 2.1. –°–æ–∑–¥–∞—Ç—å –≤–æ–∑–≤—Ä–∞—Ç
```
POST /sales/:id/return
```

**Body:**
```json
{
  "items": [
    {
      "saleItemId": 1,
      "quantity": 1,
      "reason": "–ù–µ –ø–æ–¥–æ—à–µ–ª —Ä–∞–∑–º–µ—Ä"
    }
  ],
  "refundMethod": "cash",
  "note": "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –∫ –≤–æ–∑–≤—Ä–∞—Ç—É"
}
```

**Response:** (–Ω–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Ç–∏–ø–∞ "return")

### 2.2. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–æ–∑–≤—Ä–∞—Ç—ã
```
GET /sales/returns
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:** (—Ç–µ –∂–µ, —á—Ç–æ –∏ –¥–ª—è GET /sales, –Ω–æ type –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ = "return")

### 2.3. –ü–æ–ª—É—á–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç –ø–æ ID
```
GET /sales/returns/:id
```

---

## 3. –û–±–º–µ–Ω—ã (Exchanges)

### 3.1. –°–æ–∑–¥–∞—Ç—å –æ–±–º–µ–Ω
```
POST /sales/:id/exchange
```

**Body:**
```json
{
  "returnItems": [
    {
      "saleItemId": 1,
      "quantity": 1,
      "reason": "–ù–µ –ø–æ–¥–æ—à–µ–ª —Ä–∞–∑–º–µ—Ä"
    }
  ],
  "newItems": [
    {
      "productId": 2,
      "quantity": 1,
      "price": 29.99
    }
  ],
  "differenceAmount": 0,
  "paymentMethod": "cash",
  "note": "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –∫ –æ–±–º–µ–Ω—É"
}
```

**Response:** (–Ω–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Ç–∏–ø–∞ "exchange")

### 3.2. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ–±–º–µ–Ω—ã
```
GET /sales/exchanges
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:** (—Ç–µ –∂–µ, —á—Ç–æ –∏ –¥–ª—è GET /sales, –Ω–æ type –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ = "exchange")

### 3.3. –ü–æ–ª—É—á–∏—Ç—å –æ–±–º–µ–Ω –ø–æ ID
```
GET /sales/exchanges/:id
```

---

## 4. –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –∏ –æ—Ç–ª–æ–∂–∫–∏ (Drafts & Deferred)

### 4.1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏
```
GET /sales/drafts
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` (string, optional) - –ø–æ–∏—Å–∫ –ø–æ ID, –∫–ª–∏–µ–Ω—Ç—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `storeId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É
- `sellerId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ–¥–∞–≤—Ü—É
- `customerId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª–∏–µ–Ω—Ç—É
- `startDate` (string, optional) - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
- `endDate` (string, optional) - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
- `page` (number, optional)
- `limit` (number, optional)

**Response:** (—Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–∂ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "draft")

### 4.2. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç–ª–æ–∂–∫–∏
```
GET /sales/deferred
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:** (—Ç–µ –∂–µ, —á—Ç–æ –∏ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤)

**Response:** (—Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–∂ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "deferred")

### 4.3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫
```
POST /sales/drafts
```

**Body:** (—Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç, —á—Ç–æ –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–¥–∞–∂–∏, –Ω–æ `isDraft: true`)

### 4.4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –æ—Ç–ª–æ–∂–∫—É
```
POST /sales/deferred
```

**Body:** (—Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç, —á—Ç–æ –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–¥–∞–∂–∏, –Ω–æ `isDeferred: true`)

### 4.5. –ó–∞–≤–µ—Ä—à–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫/–æ—Ç–ª–æ–∂–∫—É (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∂—É)
```
POST /sales/drafts/:id/complete
POST /sales/deferred/:id/complete
```

**Body:** (–º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º)

---

## 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ (Statistics)

### 5.1. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–¥–∞–∂
```
GET /sales/statistics
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `storeId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É
- `sellerId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ–¥–∞–≤—Ü—É
- `startDate` (string, optional) - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (YYYY-MM-DD)
- `endDate` (string, optional) - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (YYYY-MM-DD)
- `groupBy` (string, optional) - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (day, week, month, year, seller, store, paymentMethod)

**Response:**
```json
{
  "data": {
    "totalTransactions": 150,
    "totalAmount": 250000.00,
    "totalProducts": 450,
    "totalServices": 20,
    "totalKits": 15,
    "totalCertificates": 5,
    "totalReturns": 10,
    "totalReturnsAmount": 5000.00,
    "totalExchanges": 5,
    "totalExchangesAmount": 2000.00,
    "totalGiftCardsUsed": 8,
    "totalGiftCardsAmount": 4000.00,
    "totalLoyaltyPointsEarned": 2500,
    "totalLoyaltyPointsUsed": 500,
    "totalDebtPayments": 3000.00,
    "customerBalance": {
      "totalAccrued": 5000.00,
      "totalSpent": 2000.00,
      "currentBalance": 3000.00
    },
    "byPaymentMethod": [
      {
        "method": "cash",
        "count": 80,
        "amount": 120000.00
      },
      {
        "method": "card",
        "count": 70,
        "amount": 130000.00
      }
    ],
    "byType": [
      {
        "type": "product",
        "count": 450,
        "amount": 200000.00
      },
      {
        "type": "service",
        "count": 20,
        "amount": 30000.00
      },
      {
        "type": "kit",
        "count": 15,
        "amount": 15000.00
      },
      {
        "type": "certificate",
        "count": 5,
        "amount": 5000.00
      }
    ]
  }
}
```

### 5.2. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –¥–∞—Ç–∞–º (–¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤)
```
GET /sales/statistics/by-date
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `storeId` (number, optional)
- `startDate` (string, required) - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (YYYY-MM-DD)
- `endDate` (string, required) - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (YYYY-MM-DD)
- `groupBy` (string, optional) - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (day, week, month) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "day"

**Response:**
```json
{
  "data": [
    {
      "date": "2024-01-15",
      "transactions": 10,
      "amount": 15000.00,
      "products": 25,
      "services": 2
    },
    {
      "date": "2024-01-16",
      "transactions": 12,
      "amount": 18000.00,
      "products": 30,
      "services": 1
    }
  ]
}
```

---

## 6. –ö–ª–∏–µ–Ω—Ç—ã (Customers)

### 6.1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
```
GET /customers
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` (string, optional) - –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, —Ç–µ–ª–µ—Ñ–æ–Ω—É, email, –Ω–æ–º–µ—Ä—É –∫–∞—Ä—Ç—ã
- `storeId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É
- `hasDebt` (boolean, optional) - —Ç–æ–ª—å–∫–æ —Å –¥–æ–ª–≥–∞–º–∏
- `hasLoyaltyPoints` (boolean, optional) - —Ç–æ–ª—å–∫–æ —Å –±–∞–ª–ª–∞–º–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
- `page` (number, optional)
- `limit` (number, optional)

**Response:**
```json
{
  "data": [
    {
      "id": 1,
      "name": "John Doe",
      "phone": "+77001234567",
      "email": "john@example.com",
      "cardNumber": "1234567890",
      "loyaltyPoints": 250,
      "totalPurchases": 50000.00,
      "totalTransactions": 25,
      "lastPurchaseDate": "2024-01-15T10:30:00Z",
      "debtAmount": 0,
      "notes": "VIP –∫–ª–∏–µ–Ω—Ç",
      "createdAt": "2023-06-01T10:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "totalPages": 5
  }
}
```

### 6.2. –ü–æ–ª—É—á–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ ID
```
GET /customers/:id
```

### 6.3. –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
```
POST /customers
```

**Body:**
```json
{
  "name": "John Doe",
  "phone": "+77001234567",
  "email": "john@example.com",
  "cardNumber": "1234567890",
  "notes": "VIP –∫–ª–∏–µ–Ω—Ç"
}
```

### 6.4. –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
```
PUT /customers/:id
```

**Body:** (—Ç–µ –∂–µ –ø–æ–ª—è, —á—Ç–æ –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)

### 6.5. –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
```
DELETE /customers/:id
```

### 6.6. –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∫—É–ø–æ–∫ –∫–ª–∏–µ–Ω—Ç–∞
```
GET /customers/:id/purchases
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `startDate` (string, optional)
- `endDate` (string, optional)
- `page` (number, optional)
- `limit` (number, optional)

**Response:** (—Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–∂ –∫–ª–∏–µ–Ω—Ç–∞)

### 6.7. –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–ª–∏–µ–Ω—Ç–∞ (–±–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –∏ –¥–æ–ª–≥–∏)
```
GET /customers/:id/balance
```

**Response:**
```json
{
  "data": {
    "loyaltyPoints": 250,
    "debtAmount": 0,
    "totalAccrued": 5000.00,
    "totalSpent": 2000.00,
    "currentBalance": 3000.00
  }
}
```

### 6.8. –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ (–±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∂—É)
```
GET /customers/search
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `q` (string, required) - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã, email)
- `limit` (number, optional) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10, –º–∞–∫—Å–∏–º—É–º 20)

**Response:**
```json
{
  "data": [
    {
      "id": 1,
      "name": "John Doe",
      "phone": "+77001234567",
      "email": "john@example.com",
      "cardNumber": "1234567890",
      "loyaltyPoints": 250,
      "debtAmount": 0
    }
  ]
}
```

### 6.9. –ü–æ–≥–∞—Å–∏—Ç—å –¥–æ–ª–≥ –∫–ª–∏–µ–Ω—Ç–∞
```
POST /customers/:id/repay-debt
```

**Body:**
```json
{
  "amount": 1000.00,
  "paymentMethod": "cash",
  "saleId": 1,
  "note": "–ü–æ–≥–∞—à–µ–Ω–∏–µ –¥–æ–ª–≥–∞ –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ"
}
```

**Response:**
```json
{
  "data": {
    "id": 1,
    "customerId": 1,
    "amount": 1000.00,
    "paymentMethod": "cash",
    "saleId": 1,
    "remainingDebt": 0,
    "createdAt": "2024-01-15T10:30:00Z"
  }
}
```

### 6.10. –ü–æ–ª—É—á–∏—Ç—å –¥–æ–ª–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞
```
GET /customers/:id/debts
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `status` (string, optional) - —Å—Ç–∞—Ç—É—Å (all, unpaid, paid, partial, overdue)
- `page` (number, optional)
- `limit` (number, optional)

**Response:**
```json
{
  "data": [
    {
      "id": 1,
      "saleId": 1,
      "saleNumber": "TXN-2024-001",
      "amount": 5000.00,
      "paidAmount": 2000.00,
      "remainingAmount": 3000.00,
      "status": "partial",
      "dueDate": "2024-02-01",
      "isOverdue": false,
      "createdAt": "2024-01-15T10:30:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 5,
    "totalPages": 1
  }
}
```

---

## 7. –°–∫–∏–¥–∫–∏ –∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã (Discounts & Promo Codes)

### 7.1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã
```
GET /discounts
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` (string, optional) - –ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É, –Ω–∞–∑–≤–∞–Ω–∏—é
- `isActive` (boolean, optional) - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ
- `type` (string, optional) - —Ç–∏–ø (percentage, fixed, free_shipping)
- `page` (number, optional)
- `limit` (number, optional)

**Response:**
```json
{
  "data": [
    {
      "id": 1,
      "code": "SUMMER2024",
      "name": "–õ–µ—Ç–Ω—è—è —Å–∫–∏–¥–∫–∞",
      "type": "percentage",
      "value": 15,
      "minPurchaseAmount": 1000,
      "maxDiscountAmount": 500,
      "applicableTo": "all",
      "applicableProductIds": [],
      "applicableCategoryIds": [],
      "startDate": "2024-06-01T00:00:00Z",
      "endDate": "2024-08-31T23:59:59Z",
      "usageLimit": 100,
      "usageCount": 45,
      "isActive": true,
      "createdAt": "2024-05-01T10:00:00Z"
    }
  ]
}
```

### 7.2. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥ –ø–æ ID
```
GET /discounts/:id
```

### 7.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
```
POST /discounts/validate
```

**Body:**
```json
{
  "code": "SUMMER2024",
  "customerId": 1,
  "items": [
    {
      "productId": 1,
      "quantity": 2,
      "price": 999.99
    }
  ],
  "subtotal": 1999.98
}
```

**Response:**
```json
{
  "data": {
    "valid": true,
    "discount": {
      "id": 1,
      "code": "SUMMER2024",
      "name": "–õ–µ—Ç–Ω—è—è —Å–∫–∏–¥–∫–∞",
      "type": "percentage",
      "value": 15,
      "discountAmount": 299.997,
      "finalAmount": 1699.983
    }
  }
}
```

### 7.4. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
```
POST /discounts
```

**Body:**
```json
{
  "code": "SUMMER2024",
  "name": "–õ–µ—Ç–Ω—è—è —Å–∫–∏–¥–∫–∞",
  "type": "percentage",
  "value": 15,
  "minPurchaseAmount": 1000,
  "maxDiscountAmount": 500,
  "applicableTo": "all",
  "applicableProductIds": [],
  "applicableCategoryIds": [],
  "startDate": "2024-06-01T00:00:00Z",
  "endDate": "2024-08-31T23:59:59Z",
  "usageLimit": 100,
  "isActive": true
}
```

### 7.5. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
```
PUT /discounts/:id
```

### 6.6. –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
```
DELETE /discounts/:id
```

### 7.7. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∫–∏–¥–∫—É –≤—Ä—É—á–Ω—É—é (–¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–∞)
```
POST /sales/apply-discount
```

**Body:**
```json
{
  "saleId": 1,
  "discountType": "percentage",
  "discountValue": 10,
  "note": "–†—É—á–Ω–∞—è —Å–∫–∏–¥–∫–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞"
}
```

---

## 8. –ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Gift Cards & Certificates)

### 8.1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–∞—Ä—Ç—ã
```
GET /gift-cards
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` (string, optional) - –ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É, –Ω–æ–º–µ—Ä—É
- `status` (string, optional) - —Å—Ç–∞—Ç—É—Å (active, used, expired, cancelled)
- `type` (string, optional) - —Ç–∏–ø (certificate, voucher)
- `storeId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É
- `page` (number, optional)
- `limit` (number, optional)

**Response:**
```json
{
  "data": [
    {
      "id": 1,
      "code": "GC-1234567890",
      "number": "1234567890",
      "type": "certificate",
      "amount": 5000.00,
      "remainingAmount": 3000.00,
      "status": "active",
      "issuedAt": "2024-01-01T10:00:00Z",
      "expiresAt": "2025-01-01T23:59:59Z",
      "issuedBy": 1,
      "issuedByName": "Admin",
      "storeId": 1,
      "storeName": "Store Madiyar-accessories",
      "usedInSales": [1, 5, 10],
      "createdAt": "2024-01-01T10:00:00Z"
    }
  ]
}
```

### 8.2. –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ—á–Ω—É—é –∫–∞—Ä—Ç—É –ø–æ ID –∏–ª–∏ –∫–æ–¥—É
```
GET /gift-cards/:id
GET /gift-cards/code/:code
```

### 8.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∞—Ä–æ—á–Ω—É—é –∫–∞—Ä—Ç—É
```
POST /gift-cards/validate
```

**Body:**
```json
{
  "code": "GC-1234567890"
}
```

**Response:**
```json
{
  "data": {
    "valid": true,
    "giftCard": {
      "id": 1,
      "code": "GC-1234567890",
      "type": "certificate",
      "amount": 5000.00,
      "remainingAmount": 3000.00,
      "status": "active",
      "expiresAt": "2025-01-01T23:59:59Z"
    }
  }
}
```

### 8.4. –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–∞—Ä–æ—á–Ω—É—é –∫–∞—Ä—Ç—É
```
POST /gift-cards
```

**Body:**
```json
{
  "type": "certificate",
  "amount": 5000.00,
  "expiresAt": "2025-01-01T23:59:59Z",
  "storeId": 1,
  "note": "–ü–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç"
}
```

### 8.5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥–∞—Ä–æ—á–Ω—É—é –∫–∞—Ä—Ç—É –≤ –ø—Ä–æ–¥–∞–∂–µ
```
POST /gift-cards/:id/use
```

**Body:**
```json
{
  "saleId": 1,
  "amount": 2000.00
}
```

### 8.6. –û—Ç–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–æ—á–Ω–æ–π –∫–∞—Ä—Ç—ã
```
POST /gift-cards/:id/refund
```

**Body:**
```json
{
  "saleId": 1,
  "amount": 2000.00
}
```

### 8.7. –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ—á–Ω—É—é –∫–∞—Ä—Ç—É
```
PUT /gift-cards/:id
```

### 8.8. –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–∞—Ä–æ—á–Ω—É—é –∫–∞—Ä—Ç—É
```
DELETE /gift-cards/:id
```

---

## 9. –ü—Ä–æ–¥–∞–≤—Ü—ã (Sellers)

### 9.1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
```
GET /sellers
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` (string, optional) - –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, email
- `storeId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É
- `isActive` (boolean, optional) - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ
- `page` (number, optional)
- `limit` (number, optional)

**Response:**
```json
{
  "data": [
    {
      "id": 5,
      "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "email": "ivan@example.com",
      "phone": "+77001234567",
      "storeId": 1,
      "storeName": "Store Madiyar-accessories",
      "role": "seller",
      "isActive": true,
      "totalSales": 150,
      "totalAmount": 250000.00,
      "createdAt": "2023-06-01T10:00:00Z"
    }
  ]
}
```

### 9.2. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–∞ –ø–æ ID
```
GET /sellers/:id
```

### 9.3. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–¥–∞–≤—Ü–∞
```
GET /sellers/:id/statistics
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `startDate` (string, optional)
- `endDate` (string, optional)

**Response:**
```json
{
  "data": {
    "sellerId": 5,
    "sellerName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "totalTransactions": 150,
    "totalAmount": 250000.00,
    "averageTransaction": 1666.67,
    "totalProducts": 450,
    "totalServices": 20,
    "period": {
      "startDate": "2024-01-01",
      "endDate": "2024-01-31"
    }
  }
}
```

### 9.4. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞
```
GET /sellers/by-store/:storeId
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `isActive` (boolean, optional) - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ

**Response:**
```json
{
  "data": [
    {
      "id": 5,
      "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "email": "ivan@example.com",
      "phone": "+77001234567",
      "storeId": 1,
      "storeName": "Store Madiyar-accessories",
      "role": "seller",
      "isActive": true
    }
  ]
}
```

---

## 10. –ú–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã (Payment Methods)

### 9.1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã
```
GET /payment-methods
```

**Response:**
```json
{
  "data": [
    {
      "id": 1,
      "code": "cash",
      "name": "–ù–∞–ª–∏—á–Ω—ã–µ",
      "icon": "üíµ",
      "isActive": true,
      "sortOrder": 1
    },
    {
      "id": 2,
      "code": "card",
      "name": "–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞",
      "icon": "üí≥",
      "isActive": true,
      "sortOrder": 2
    },
    {
      "id": 3,
      "code": "transfer",
      "name": "–ü–µ—Ä–µ–≤–æ–¥",
      "icon": "üì±",
      "isActive": true,
      "sortOrder": 3
    },
    {
      "id": 4,
      "code": "gift_card",
      "name": "–ü–æ–¥–∞—Ä–æ—á–Ω–∞—è –∫–∞—Ä—Ç–∞",
      "icon": "üéÅ",
      "isActive": true,
      "sortOrder": 4
    }
  ]
}
```

### 9.2. –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã –ø–æ ID
```
GET /payment-methods/:id
```

### 9.3. –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã
```
POST /payment-methods
```

**Body:**
```json
{
  "code": "cash",
  "name": "–ù–∞–ª–∏—á–Ω—ã–µ",
  "icon": "üíµ",
  "isActive": true,
  "sortOrder": 1
}
```

### 9.4. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã
```
PUT /payment-methods/:id
```

### 9.5. –£–¥–∞–ª–∏—Ç—å –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã
```
DELETE /payment-methods/:id
```

---

## 11. –û—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º (Reports)

### 10.1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º (PDF/Excel)
```
GET /sales/reports
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `format` (string, optional) - —Ñ–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞ (pdf, excel) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "pdf"
- `storeId` (number, optional)
- `sellerId` (number, optional)
- `startDate` (string, required)
- `endDate` (string, required)
- `includeDetails` (boolean, optional) - –≤–∫–ª—é—á–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
- `groupBy` (string, optional) - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (day, seller, product, category)

**Response:** (—Ñ–∞–π–ª PDF –∏–ª–∏ Excel)

### 10.2. –ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–∞–≤—Ü–∞–º
```
GET /sales/reports/sellers
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `storeId` (number, optional)
- `startDate` (string, required)
- `endDate` (string, required)

**Response:**
```json
{
  "data": [
    {
      "sellerId": 5,
      "sellerName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "totalTransactions": 50,
      "totalAmount": 75000.00,
      "averageTransaction": 1500.00,
      "totalProducts": 150,
      "totalServices": 10
    }
  ]
}
```

### 10.3. –ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç –ø–æ —Ç–æ–≤–∞—Ä–∞–º
```
GET /sales/reports/products
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `storeId` (number, optional)
- `startDate` (string, required)
- `endDate` (string, required)
- `categoryId` (number, optional)
- `sortBy` (string, optional) - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (quantity, amount) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "quantity"
- `limit` (number, optional) - —Ç–æ–ø N —Ç–æ–≤–∞—Ä–æ–≤

**Response:**
```json
{
  "data": [
    {
      "productId": 1,
      "productName": "Laptop Computer",
      "productSku": "LAP-001",
      "categoryName": "Electronics",
      "totalQuantity": 100,
      "totalAmount": 99999.00,
      "averagePrice": 999.99,
      "transactionsCount": 50
    }
  ]
}
```

### 10.4. –ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º
```
GET /sales/reports/customers
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `storeId` (number, optional)
- `startDate` (string, required)
- `endDate` (string, required)
- `sortBy` (string, optional) - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (amount, transactions) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "amount"
- `limit` (number, optional) - —Ç–æ–ø N –∫–ª–∏–µ–Ω—Ç–æ–≤

**Response:**
```json
{
  "data": [
    {
      "customerId": 1,
      "customerName": "John Doe",
      "customerPhone": "+77001234567",
      "totalTransactions": 25,
      "totalAmount": 50000.00,
      "averageTransaction": 2000.00,
      "lastPurchaseDate": "2024-01-15T10:30:00Z"
    }
  ]
}
```

---

## 12. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### 11.1. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏
```
GET /products/search
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `q` (string, required) - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–∞—Ä—Ç–∏–∫—É–ª, –±–∞—Ä–∫–æ–¥, –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
- `storeId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è)
- `inStock` (boolean, optional) - —Ç–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏
- `includeWholesalePrice` (boolean, optional) - –≤–∫–ª—é—á–∏—Ç—å –æ–ø—Ç–æ–≤—É—é —Ü–µ–Ω—É –≤ –æ—Ç–≤–µ—Ç

**Response:**
```json
{
  "data": [
    {
      "id": 1,
      "name": "Laptop Computer",
      "sku": "LAP-001",
      "barcode": "1234567890123",
      "price": 999.99,
      "wholesalePrice": 899.99,
      "stockQty": 50,
      "categoryName": "Electronics",
      "supplierName": "Tech Supplier",
      "availableInStore": true,
      "storeStockQty": 10
    }
  ]
}
```

### 11.2. –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –Ω–æ–º–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```
GET /sales/next-transaction-number
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `storeId` (number, optional)

**Response:**
```json
{
  "data": {
    "transactionNumber": "TXN-2024-001",
    "receiptNumber": "RCP-2024-001"
  }
}
```

### 11.3. –ü–µ—á–∞—Ç—å —á–µ–∫–∞
```
POST /sales/:id/print
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `format` (string, optional) - —Ñ–æ—Ä–º–∞—Ç (58mm, 80mm, a4) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "58mm"

**Response:** (PDF —Ñ–∞–π–ª —á–µ–∫–∞)

### 11.4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫ –Ω–∞ email/SMS
```
POST /sales/:id/send-receipt
```

**Body:**
```json
{
  "email": "customer@example.com",
  "phone": "+77001234567",
  "method": "email"
}
```

### 11.5. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞ (–ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–¥–∞–∂–∏)
```
GET /sellers/active
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `storeId` (number, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞–≥–∞–∑–∏–Ω—É

**Response:**
```json
{
  "data": [
    {
      "id": 5,
      "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "storeId": 1,
      "storeName": "Store Madiyar-accessories",
      "isActive": true
    }
  ]
}
```

### 11.6. –ü–æ–≥–∞—à–µ–Ω–∏–µ –¥–æ–ª–≥–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ
```
POST /sales/:id/repay-customer-debt
```

**Body:**
```json
{
  "customerId": 1,
  "amount": 1000.00,
  "paymentMethod": "cash",
  "note": "–ü–æ–≥–∞—à–µ–Ω–∏–µ –¥–æ–ª–≥–∞ –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ"
}
```

**Response:**
```json
{
  "data": {
    "saleId": 1,
    "debtRepaymentId": 1,
    "customerId": 1,
    "amount": 1000.00,
    "remainingDebt": 0,
    "createdAt": "2024-01-15T10:30:00Z"
  }
}
```

---

## –û–±—â–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã (–∫—Ä–æ–º–µ `/auth/login` –∏ `/auth/register`) —Ç—Ä–µ–±—É—é—Ç Bearer Token –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
   ```
   Authorization: Bearer <access_token>
   ```

2. **–§–æ—Ä–º–∞—Ç –¥–∞—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç ISO 8601 (YYYY-MM-DD –∏–ª–∏ YYYY-MM-DDTHH:mm:ssZ)

3. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:** –ï—Å–ª–∏ —ç–Ω–¥–ø–æ–π–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - `page` (number) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 1)
   - `limit` (number) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –º–∞–∫—Å–∏–º—É–º 100)
   
   **Response —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π:**
   ```json
   {
     "data": [...],
     "pagination": {
       "page": 1,
       "limit": 20,
       "total": 100,
       "totalPages": 5
     }
   }
   ```

4. **–û—à–∏–±–∫–∏:** –ü—Ä–∏ –æ—à–∏–±–∫–µ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
   ```json
   {
     "message": "Error message",
     "error": "Error code"
   }
   ```

5. **–°—Ç–∞—Ç—É—Å—ã –æ—Ç–≤–µ—Ç–æ–≤:**
   - `200` - —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å (GET, PUT, DELETE)
   - `201` - —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (POST)
   - `400` - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - `401` - –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω)
   - `403` - –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤)
   - `404` - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
   - `500` - –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

6. **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥–µ. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `400` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏.

7. **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:**
   - `id` - number –∏–ª–∏ string (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
   - `price`, `amount` - number (decimal, 2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
   - `quantity` - number (integer)
   - `date` - string (ISO 8601)
   - `status` - string (enum –∑–Ω–∞—á–µ–Ω–∏–π)

8. **CORS:** –ë—ç–∫–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —á–µ—Ä–µ–∑ Next.js proxy `/api/backend`).

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã):
1. **Sales CRUD** (`/sales`) - –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–∂
2. **Sales Search & Filters** (`/sales` —Å query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏) - –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂
3. **Sales Statistics** (`/sales/statistics`) - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–¥–∞–∂
4. **Customers** (`/customers`) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
5. **Payment Methods** (`/payment-methods`) - –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã
6. **Products Search** (`/products/search`) - –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
7. **Sales Returns** (`/sales/:id/return`) - –≤–æ–∑–≤—Ä–∞—Ç—ã
8. **Sales Exchanges** (`/sales/:id/exchange`) - –æ–±–º–µ–Ω—ã
9. **Sales Drafts** (`/sales/drafts`) - —á–µ—Ä–Ω–æ–≤–∏–∫–∏
10. **Sales Deferred** (`/sales/deferred`) - –æ—Ç–ª–æ–∂–∫–∏
11. **Discounts** (`/discounts`) - –ø—Ä–æ–º–æ–∫–æ–¥—ã –∏ —Å–∫–∏–¥–∫–∏
12. **Gift Cards** (`/gift-cards`) - –ø–æ–¥–∞—Ä–æ—á–Ω—ã–µ –∫–∞—Ä—Ç—ã

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
13. **Sales Reports** (`/sales/reports`) - –æ—Ç—á–µ—Ç—ã
14. **Print Receipt** (`/sales/:id/print`) - –ø–µ—á–∞—Ç—å —á–µ–∫–æ–≤
15. **Send Receipt** (`/sales/:id/send-receipt`) - –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ–∫–æ–≤

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ —Å –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–∫–∏–¥–∫–æ–π:
```
POST /sales
Content-Type: application/json
Authorization: Bearer <token>

{
  "storeId": 1,
  "customerId": 1,
  "sellerId": 5,
  "items": [
    {
      "productId": 1,
      "quantity": 2,
      "price": 999.99,
      "discount": 0,
      "discountType": "percentage"
    }
  ],
  "subtotal": 1999.98,
  "discount": 10,
  "discountType": "percentage",
  "discountCode": "SUMMER2024",
  "totalAmount": 1799.98,
  "paymentMethod": "cash",
  "paymentMethods": [
    {
      "method": "cash",
      "amount": 1799.98
    }
  ],
  "note": "–ü—Ä–æ–¥–∞–∂–∞ —Å –ø—Ä–æ–º–æ–∫–æ–¥–æ–º"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
```
GET /sales?storeId=1&paymentMethod=cash&startDate=2024-01-01&endDate=2024-01-31&minAmount=1000&maxAmount=5000
Authorization: Bearer <token>
```

### –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞:
```
POST /sales/1/return
Content-Type: application/json
Authorization: Bearer <token>

{
  "items": [
    {
      "saleItemId": 1,
      "quantity": 1,
      "reason": "–ù–µ –ø–æ–¥–æ—à–µ–ª —Ä–∞–∑–º–µ—Ä"
    }
  ],
  "refundMethod": "cash",
  "note": "–í–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞"
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞:
```
POST /discounts/validate
Content-Type: application/json
Authorization: Bearer <token>

{
  "code": "SUMMER2024",
  "customerId": 1,
  "items": [
    {
      "productId": 1,
      "quantity": 2,
      "price": 999.99
    }
  ],
  "subtotal": 1999.98
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–æ—á–Ω–æ–π –∫–∞—Ä—Ç—ã:
```
POST /gift-cards/validate
Content-Type: application/json
Authorization: Bearer <token>

{
  "code": "GC-1234567890"
}
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ API, –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.

